\chapter{Modellierung Isolierte Ereignisse}

In diesem Kapitel soll ein Risikomodell für die Isolierten Ereignisse in der Phase regen Lebens (im Folgenden alternativ auch als Unfälle bezeichnet) erstellt werden. Die Definition der Isolierten Ereignisse wird deshalb genauer analysiert, um die Anforderungen an das spätere Risikomodell abzuleiten. Es werden zwei Ansätze vorgestellt, die diese Anforderungen erfüllen. Auf Basis von Krankenkassen Abrechnungsdaten werden dann die Modellparameter für einen konkreten Anwendungsfall geschätzt und die Modellgüte bewertet.\\

\section{Grundlegende Betrachtungen}\label{sec:grundBet}

Im Kohorten-Modell werden die Unfälle als \textbf{seltene Ereignisse}, welche die Gesundheit eines Versicherten beeinträchtigen, \textbf{sich nicht ankündigen} und bei denen der Eintrittszeitpunkt der eigentliche \textbf{Auslöser von begrenzten Leistungsabfolgen} ist, beschrieben. Außerdem sollen sie selten, und \textbf{unabhängig voneinander}, auftreten. Das heißt die Eintrittswahrscheinlichkeit für einen Unfall hängt nicht davon ab, ob der Versicherte bereits einen Unfall hatte. Es gibt also insbesondere \textbf{keinen Lerneffekt} und \textbf{keine Folgeschäden} die im Modell berücksichtigt werden müssen. Außerdem ist die durch den Unfall hervorgerufene Leistungsfolge begrenzt was bedeutet, dass \textbf{keine Chronizität} durch einen Unfall entstehen kann. Dadurch sind die isolierten Ereignisse klar zu den singulären Ereignisketten abgegrenzt, die im nächsten Kapitel behandelt werden.\\

Für das Kohorten-Modell müssen die isolierten Ereignisse in der Phase "`regen Lebens"' beschrieben werden. Deshalb werden für die Modellierung zwar alle Unfälle hinzugezogen, aber die Kosten von Unfällen aus den anderen beiden Phasen werden als jeweilige Phasen-Leistungen in der Krankenversicherungsbiographie kumuliert. Das heißt insbesondere, dass Unfälle mit Todesfolge keine besondere Betrachtung mehr benötigen, da sie bereits in der dritten Phase des Modells erfasst wurden.\\

Die Erfahrung zeigt, dass die Unfallwahrscheinlichkeit sowohl vom Alter- als auch vom Geschlecht des Versicherten abhängen kann. Dabei ist zu beachten, dass es vom Unfalltyp anhängen wird, ob ein Zusammenhang besteht und wie stark dieser Zusammenhang ist. Des Weiteren können bestimmte Unfälle auch von der Saison abhängen und so zum Beispiel häufiger im Winter auftreten, als im Sommer.\\

Zusammenfassend lässt sich sagen, dass die zu modellierende Unfallwahrscheinlichkeit unabhängig von bereits eingetretenen Unfällen ist, aber je nach Unfalltyp, vom Alter und Geschlecht des Versicherten abhängen und einer Saisonalität unterliegen kann. Für die Modellierung werden wir die Saisonalität allerdings nicht besonders betrachten, da aufgrund des in der Regel sehr langen Beobachtungszeitraums, in der Phase regen Lebens, diese Effekte nur einen sehr geringen Einfluss auf das Modell haben werden. Auf Basis dieser Erkenntnisse werden nun zwei Modelle vorgestellt:

\section{Modell - Poisson-Prozess}
Die erwartenden Kosten für Unfälle in der Phase regen Lebens, setzt sich aus zwei Teilen zusammen. Zum Einen müssen die Kosten für einen Unfall modelliert werden und zum Anderen benötigen wir einen Stochastischen Prozess der die Häufigkeit für einen Unfall, in dem beobachteten Zeitraum, zählt. Wir werden zuerst den Stochastischen Prozess betrachten. Eine Modellannahme ist, dass die Wahrscheinlichkeit für einen Unfall unabhängig davon ist, wann der vorherige Unfall eingetreten ist. Das heißt der Stochastische Prozess hat unabhängige Zuwächse. Außerdem nehmen wir an, dass aufgrund des Charakters der Unfälle als seltene Ereignisse, die Genesungsdauer vernachlässigt werden kann. Das heißt die begrenzte Leistungsfolge, die bei jeden Unfall ausgelöst wird, wird auf den Zeitpunkt des Unfalls konzentriert und die Zeit zwischen zwei Unfällen, hängt nur von der Unfallwahrscheinlichkeit ab. Bevor wir den Prozess näher beschreiben führen wir folgende Bezeichnungen ein:

\begin{enumerate}[label=(\roman{*})]
	\item Die Unfallwahrscheinlichkeit wird mit $\lambda$ bezeichnet.
	\item Die Unfallzeitpunkte seien gegeben durch $t_0, t_1, t_2, t_3,...$ , wobei $t_0 = 0$ den Beginn der Beobachtung kennzeichnet.
	\item Die Zeit zwischen den einzelnen Unfällen sei definiert als $\{T_k\}_{k \geq 0}$ mit $T_k := t_k-t_{k-1}$ und $T_0 := 0$.
	\item Die kumulierten Zwischenankunftszeiten werden mit $S_n = \sum_{k=0}^n T_k$ bezeichnet.
	\item Die Anzahl der Unfälle wird bezeichnet durch 
	\begin{eqnarray*}
		N_t := max\{k : t_k \leq t\} = \sum_{k=1}^{\infty} \mathds{1}(S_k\leq t).
	\end{eqnarray*}
\end{enumerate}

Man sieht leicht, dass ${N_t, t\geq 0}$ der gesuchte stochastische Prozess ist und gemäß Definition \ref{def:zaehlPro} ein Zählprozess ist. Laut Voraussetzung hängt die Unfallwahrscheinlichkeit nur vom Alter und Geschlecht der Versicherten ab. Ohne Einschränkung der Allgemeinheit können wir das Alter eines Versicherten, als die Differenz aus dem aktuelles Jahr und seinem Geburtsjahr definieren. Das heißt alle Versicherten werden immer zum 1.1. ein Jahr älter. Da aufgrund der Modellannahmen keine weiteren Einflussfaktoren berücksichtigt werden müssen, ist somit die Unfallwahrscheinlichkeit eines Versicherten innerhalb eines Kalenderjahres konstant und die Unfallzeitpunkte sind gleichmäßig verteilt. Dann gilt für die Zwischenankunftszeiten $\{T_k\}_{k \geq 0}$, dass die Zeit bis zum nächsten Unfall unabhängig davon ist, wie viel Zeit $s$ bereits ohne Unfall verstrichen ist

\begin{eqnarray*}
	\mathbb(T_k>x+s | T_k>s) = \mathbb(T_k>x).
\end{eqnarray*}

Das heißt die Verteilung der Zwischenankunftszeiten sind gedächtnislos und somit gilt, gemäß Lemma \ref{lem:expLemma}, $T_k \sim exp(\lambda)$ für alle $k \geq 0$. Damit ist, innerhalb eines Kalenderjahres, ${N_t, t\geq 0}$, laut Definition \ref{def:poiPro}, ein homogener Poisson-Prozess und $N_t \sim Poi(\lambda)$. Da ein Poisson-Prozess, gemäß Theorem \ref{th:poiPro} unabhängige Zuwächse besitzt und stationär ist, passt dieser auch zu den Eingangs aufgestellten Modellannahmen. An dieser Stelle sollte auch erwähnt werden, dass aufgrund von Lemma \ref{lem:wartezeit} der Zeitpunkt, zu dem die Beobachtung beginnt, keinen Einfluss auf den Zeitpunkt des nächsten beobachteten Unfalls hat. Deshalb ist auch die Zerlegung des Beobachtungszeitraumes in Jahresscheiben gerechtfertigt und die Summe der Unfälle in den einzelnen Jahresscheiben ergibt, dann die Anzahl an Unfälle im Beobachtungszeitraum.\\

Als nächstes müssen wir uns überlegen, wie wir die Wahrscheinlichkeit für einen Unfall schätzen können. Da der Poisson-Prozess stationär ist, können wir die Parameter auf Basis von historischen Informationen schätzen. Aufgrund der erwarteten Abhängigkeit von Alter und Geschlecht, muss für jede Kombination aus Altersgruppe und Geschlecht ein separates $\lambda_{Altersgruppe, Geschlecht}$ geschätzt werden. Dazu betrachten wir die relative Häufigkeit eines Unfalls für die jeweilige Kombination aus Alter und Geschlecht und setzen
\begin{eqnarray} \label{eq:unfallWs}
	\lambda_{Altersgruppe, Geschlecht} := \frac{\#\text{Unfall}_{Altersgruppe, Geschlecht}}{\#\text{Versicherte}_{Altersgruppe, Geschlecht}}.
\end{eqnarray}

Dabei ist $\#\text{Versicherte}_{Altersgruppe, Geschlecht}$ die Anzahl aller Versicherten die in die jeweilige Alters- und Geschlechtsgruppe fallen und in dem betrachteten Zeitraum bei der Kasse versichert waren. Des weiteren ist $\#\text{Unfall}_{Altersgruppe, Geschlecht}$ die Anzahl der Unfälle aller Personen, die in die jeweilige Alters- und Geschlechtsgruppe fallen. Es werden dabei alle Fälle betrachtet, die in dem jeweiligen Kalenderjahr begonnen haben, da wir Unfälle auf den Eintrittszeitpunkt konzentrieren. Die Einteilung der Altersgruppen ist dabei flexibel. \\

Bisher haben wir nur die allgemeine Wahrscheinlichkeit für einen Unfall untersucht. Wie bereits am Anfang erwähnt, ist es sinnvoll verschiedene Unfalltypen zu betrachten, da diese sich hinsichtlich ihrer Kosten sehr stark unterscheiden können. Das Lemma \ref{lem:aufteilungPP} erlaubt es uns, den allgemeinen Unfall Prozess als eine Überlagerung von Teilprozesse darzustellen. Seien $U_1, U_2,...,U_n$ mit $n\in \mathbb{N}$ die verschiedenen relevanten Unfalltypen und $\lambda _{U_1},\lambda _{U_2},...,\lambda _{U_n}$ die zugehörigen Unfallwahrscheinlichkeiten. Dann gilt für die daraus resultierenden Prozesse 
\begin{eqnarray*} 
	N_t^{\lambda _{U_i}} &\sim& poi(\lambda _{U_i}) \\
	N_t^{\lambda} &:=& \sum^n_{i=1} N_t^{\lambda _{U_i}} \\
	N_t^{\lambda} &\sim& poi(\sum_{i=0}^n\lambda _{U_i})
\end{eqnarray*}
Das heißt der Prozess lässt sich bei Bedarf beliebig in Unterprozesse zerlegen, die jeweils eine Teilmenge der Unfälle beschreiben. Die Voraussetzung dafür ist, dass die $N_{\lambda _{U_i}}$ unabhängig voneinander sind. Deshalb müssen die einzelnen Unfalltypen so abgrenzt werden, dass es nicht zu Überschneidungen kommt.\\

Damit ist der erste Teil der Modellierung abgeschlossen und wir können nun die Kosten betrachten. Für jeden Unfalltyp sind diese aufgrund der Modellannahmen unabhängige und gleich verteilte Zufallsgrößen $X_1,X_2,...$, wobei $X_i$ die Kosten für den $i$-ten Unfall angibt. Bei Leistungskosten in der Krankenversicherung ist zu beobachten, dass es viele Fälle mit niedrigen Kosten und einige mit sehr hohen Kosten (Hochkostenfällen), aber nur einen sehr geringen Teil mit durchschnittlichen Kosten. Aus diesem Grund ist es wichtig eine Verteilungsfunktion für die $\{X_i\}_{i>0}$ zu wählen, die zu Einen die Standardfälle abdeckt und zum Anderen noch genug Masse in den hohen Kostenbereichen hat, um die Hochkostenfälle nicht zu vernachlässigen. Verteilungsfunktionen mit dieser Eigenschaft werden auch als Heavy-Tail-Verteilung\footnote{z.B. Weibull-Verteilung mit Formparameter<1 oder Log-Normalverteilung} bezeichnet. Alternativ könnte als Näherung für die Kostenverteilung auch die empirische Verteilung auf Basis der historischen Informationen verwendet werden. Dabei werden die Kosten für alle Leistungen, die aus dem Unfall resultieren, zusammenaddiert, auch wenn die Leistungszeitpunkte weit auseinander liegen oder sogar in verschiedene Jahre fallen.\\

Bei der Modellierung der Leistungskosten ist außerdem zu beachten, dass diese einer kontinuierlichen Veränderungen, durch Preisveränderungen oder die Einführung alternativer Behandlungsmethoden, unterliegen. Es ist kann versucht werden, dies durch jährliche Änderungsraten auszugleichen, trotzdem hat man in der Regel nicht genug Information alle Einflüsse auf die Kostenentwicklung zu berücksichtigen. Das optimale Vorgehen bei der Modellierung der Kostenverteilung hängt letztendlich vom Unfalltyp ab.\\ 

Kombinieren wir jetzt diese beiden Modellbestandteile, dann erhalten wir einen zusammengesetzten Poisson-Prozess, der die zukünftigen Kosten aufgrund von Unfällen beschreibt. Dieser ist für jeden Unfalltyp $U$ definiert durch
\begin{eqnarray*} 
	Y_t^U = \sum_{i=1}^{N_t^U} X_i^U. 
\end{eqnarray*}
Für einen Versicherten ist das Risiko also gleich dem Barwerten der vorhergesagten Kosten, in der Phase regen Lebens.\\

Im weiteren Verlauf dieses Kapitels werden wir diesen Modellansatz beispielhaft für einen Unfalltyp implementieren und auswerten. Allerdings wird vorher noch ein Alternativer Modellansatz vorgestellt mit dem Unfälle beschrieben werden können. 

\section{Alternativer Modellansatz - Markov-Kette}

Ein alternativer Modellansatz für die isolierten Ereignisse, kann mit Hilfe von Markov-Ketten konstruiert werden. Im Gegensatz zum Poisson-Prozess Ansatz können wir mit einer Markov-Kette die Genesungszeiten abbilden. Dadurch kann ausgeschlossen werden, dass ein Patient der im Krankenhaus behandelt wird in dieser Zeit einen weiteren Unfall erleidet. Ansonsten gelten weiterhin die unter \ref{sec:grundBet} beschriebenen Grundannahmen.  Wie bereits in Abschnitt \ref{sec:markov} gezeigt wurde, ist eine Markov-Kette durch ihre Übergangsmatrix eindeutig definiert. Deshalb werden wir beschreiben wie die Zustände und Übergangswahrscheinlichkeiten modelliert werden können. \\

Der Zustandsraum besteht im einfachsten Fall aus zwei Zuständen: $i_0 :=$ Patient ist gesund und $i_1 :=$ Patient erholt sich von einem Unfall. Als Zeitraum für einen Prozessschritt bieten sich dabei ein Tag an, da Informationen zum Unfallzeitpunkt und zur Genesungsdauer in der Regel nur Tag genau vorliegen. Die folgende Grafik veranschaulicht die möglichen Übergänge.\\

\begin{figure}[htb]
\centering
	\begin{tikzpicture}[->, >=stealth', auto, semithick, node distance=3cm]
	\tikzstyle{every state}=[fill=white,draw=black,thick,text=black,scale=1]
	\node[state]    (A)                     {$i_0$};
	\node[state]    (B)[right of=A]   {$i_1$};
	\path
	(A) edge[loop left]     node{$p_{0,0}$}         (A)
			edge[bend left,above]      node{$p_{0,1}$}      (B)
	(B) edge[loop right]    node{$p_{1,1}$}     (B)
			edge[bend left,below]    node{$p_{1,0}$}      (A);
	\end{tikzpicture}
\caption{Einfaches Markov-Modell} 
\label{fig:simpleMarkov} 
\end{figure}

Die Übergangswahrscheinlichkeiten sind dabei wie folgt definiert. Die Eintrittswahrscheinlichkeit für einen Unfall $p_{0,1}$ ist die auf den Tag heruntergerechnete relative Unfallhäufigkeit, die auf Basis der empirischen Daten ermittelt werden kann. Damit gilt für die Wahrscheinlichkeit gesund zu bleiben $p_{0,0} = 1-p_{0,1}$. Die Genesungswahrscheinlichkeit hängt von der Verweildauer, also der Genesungszeit, ab. Intuitiv könnte man wieder die mittlere Genesungsdauer $t_{Genesung}$ als Grundlage nehmen und damit definieren, dass und $p_{1,1}:= 1$/$t_{Genesung}$ und $p_{1,0} = 1- p_{1,1}$. In diesem Fall ist die Verweildauer im Zustand $i_1$ im stetigen Fall geometrisch verteilt und exponentialverteilt im kontinuierlichen Fall.\\

An dieser Stelle wird die Schwäche dieses einfachen Ansatzes deutlich. In einer Markov-Kette sind die Verweilzeit immer geometrisch- bzw. exponentialverteilt. Aber gerade nach einem schweren Unfall, kann es passieren, dass der Patient eine gewisse Zeit im Krankenhaus bleiben muss, bevor die Möglichkeit einer Entlassung besteht. Um auch diese Fälle sauber abbilden zu können, ist es notwendig neue Zustände einzuführen. Deshalb wird für jeden Genesungstag ein eigener Zustand angelegt, der modellieren, ob die Behandlung abgeschlossen ist oder einen weiteren Tag dauert. Die daraus resultierenden Übergänge werden in de folgenden Grafik veranschaulicht.\\

\begin{figure}[htb]
\centering
	\begin{tikzpicture}[->, >=stealth', auto, semithick, node distance=2.5cm]
	\tikzstyle{every state}=[fill=white,draw=black,thick,text=black,scale=1]
	\node[state]    (A)                     {$i_0$};
	\node[state]    (B)[right of=A]   {$i_1$};
	\node[state]    (C)[below right=0.7cm and 1.5cm of B]   {$i_2$};
	\node[state]    (D)[below right=0.7cm and 1.5cm of C]   {$i_3$};
	\node[state]    (E)[below right=0.7cm and 1.5cm of D]   {$...$};
	\path
	(A) edge[loop left]     		 node{$p_{0,0}$}      (A)
			edge[bend left,above]    node{$p_{0,1}$}      (B)
	(B) edge[bend left,below]    node{$p_{1,0}$}      (A)
			edge[bend left,above]    node{$p_{1,2}$}      (C)
	(C) edge[bend left,below]    node{$p_{2,0}$}      (A)
			edge[bend left,above]    node{$p_{2,3}$}      (D)
	(D) edge[bend left,below]    node{$p_{3,0}$}      (A)
			edge[bend left,above]    node{$p_{3,...}$}      (E);
	\end{tikzpicture}
\caption{Erweitertes Markov-Modell} 
\label{fig:komplexMarkov} 
\end{figure}

Dieses Konzept ließe sich sogar noch erweitern, um verschiedene Genesungspfade zu modellieren. Zum Beispiel eine notwendige Reha des Patienten oder eine ambulante Betreuung. Es muss allerdings beachtet werden, dass je feiner das Modell aufgegliedert wird, es immer schwieriger wird für jeden Pfad eine ausreichende Menge an Daten zu finden um die Parameter zu schätzen. Wenn die Datenbasis zu klein wird, ist die Gefahr groß durch Extremfälle das Modell zu verzerren.\\  

Bisher haben wir nur einen Unfalltyp betrachtet. Weitere Unfalltypen können als neue Zustände, $i_{U_n}$ für $n\in \mathbb{N}$, in das bestehendes Modell integriert werden. Dabei ist wieder zu beachten, dass die Unfälle so abgegrenzt sind, dass es zu keinen Überschneidungen kommt, da sonst die Übergangsmatrix keine stochastische Matrix mehr ist. Für jeden neu hinzugefügten Unfalltyp verringert sich die Wahrscheinlichkeit gesund zu bleiben $p_{0,0}$ genau um die jeweilige Eintrittswahrscheinlichkeit $p_{0,U_n}$. Die restlichen Übergangswahrscheinlichkeiten bleiben unverändert. Bei der Menge an möglich Unfällen und unter Berücksichtigung der benötigten Zustände um die Genesungszeiten zu modellieren, führt dies zu einem sehr großen Zustandsraum. In der Übergangsmatrix sind allerdings die meisten Einträge $0$ und müssen somit nicht modelliert werden.\\

Der Vorteil dieser Vorgehensweise ist, dass nachvollziehbar dargestellt wird, was bei einem Unfall passiert. Jedes Mal wenn die Markov-Kette den Zustand $i_0$ verlässt ist ein Unfall passiert und es wird ein kleiner Teilprozess gestartet der die Genesung simuliert. Dieser Teilprozess ist abgeschlossen wenn die Markov-Kette wieder in den Zustand $i_0$ zurückkehrt. Der Nachteil jedoch ist, dass bevor ein neuer Unfall eintreten kann, die Markov-Kette in den Zustand $i_0$ zurückkehren muss. Dies führt dazu, dass nach jedem Unfall ein gesunder Tag eintreten muss, bevor eine neuer Unfall passieren kann. Um dies zu vermeiden, müssten für jeden Tag der Genesung Übergangswahrscheinlichkeiten zu den verschiedenen Unfalltypen modelliert werden. Dadurch würde sich die Komplexität des Modells und der Modellierungsaufwand sehr stark erhöhen. Allerdings sind Unfälle, wie Eingangs beschrieben, seltene Ereignisse und damit kann der Fall, dass zwei Unfälle direkt hintereinander eintreten, vernachlässigt werden, da der daraus resultierende Fehler entsprechend klein ist.  \\

Die nächste notwendige Erweiterung dieses Modellansatzes ist der Wechsel von konstanten Übergangswahrscheinlichkeiten zu Alters- und Geschlechtsabhängigen. Wie bereits beim Poisson-Modell ist die praktikabelste Lösung die Wahrscheinlichkeiten als Treppenfunktion auf Basis der relativen Häufigkeit zu modellieren. Dabei ist es möglich nur die Unfallwahrscheinlichkeiten $\{p_{0,U_n}\}_{n \in \mathbb{N}}$ als Funktion von Alter und Geschlecht darzustellen. Dies hängt natürlich immer vom jeweiligen Unfalltyp ab.\\

Die Kosten die für die Behandlung eines Unfalls entstehen, treten in diesem Modellansatz immer dann auf, wenn ein Patient aus dem Krankenhaus entlassen wird. Für die Modellierung der Kostenfunktion gelten die selben Überlegungen wie im Poisson-Modell. Allerdings ermöglicht es der Markov-Ansatz, unterschiedliche Kostenverteilungen für einen Unfalltyp zu verwenden und zwar abhängig davon, wie lange die Genesung benötigt hat. Dadurch lässt sich die Streuung der einzelnen Kostenverteilungen reduzieren.\\

Dieser Modellansatz erzeugt sehr komplexe Modelle, die sich am Besten mit einem Simulationsansatz auswerten lassen. Dafür eignet sich das Monte-Carlo-Verfahren sehr gut, da auf diese Weise empirische Kostenverteilungen erzeugt werden können, die sich dann einfach weiterverarbeiten lassen. Außerdem sollte erwähnt werden, dass unabhängig von der Startverteilung die Markov-Kette nach ausreichend vielen Schritten immer wieder in den Ausgangszustand $i_0$ zurückkehrt. Es gibt keine absorbierenden Zustände, da Tod und Pflegefälle ausgeschlossen wurden. Außerdem ist jeder erreichbare Zustand rekurrent und kann somit immer, in endlich Zeit, erneut erreicht werden.\\

Zusammenfassend lässt sich sagen, dass auch mit Hilfe von Markov-Ketten das Phänomen der isolierten Ereignisse beschrieben werden kann. Diese Herangehensweise erlaubt dabei eine detaillierte Modellierung des Genesungsprozesses und sie ist dabei hinsichtlich der modellierten Unfalltypen, ähnlich leicht skalierbar wie der Poisson-Ansatz. Der Nachteil ist die Komplexität der Modelle und die große Anzahl an Variablen die geschätzt werden müssen. Dadurch ist eine effiziente Auswertung nur mit Hilfe eines Simulationsansatzes möglich. Im weiteren Verlauf dieses Kapitels werden wir uns deshalb auf den Poisson-Ansatz konzentrieren. \\ 

\section{Anwendung und Test des Modells}

Im folgenden Abschnitt wird zunächst die Datengrundlage vorgestellt, auf der das Modell später getestet werden soll. Anschließend wird die Vorgehensweise zur Identifizierung der Unfälle beschrieben. Aus diesen werden dann im letzten Teil die Parameter des Modells geschätzt und die Modellgüte bewertet. In diesem Abschnitt werden nur stationäre Fälle betrachtet, also Fälle die zu einer Aufnahme im Krankenhaus geführt haben.

\subsection{Datengrundlage und Aufbereitung}

Die Datengrundlage für die Anwendung des Modells besteht aus Versicherten- und Krankenhausabrechnungsdaten, die über einen Zeitraum von 4 Jahren erfasst wurden.Für die Aufbereitung der Daten wurden Duplikate entfernt, die Datenformate vereinheitlicht und fehlerhafte bzw. unvollständige Datensätze herausgefiltert. Die wichtigsten Informationen in den Krankenhausdaten sind die abgerechnete DRG's und die gestellten Diagnosen (ICD's). Deshalb wird, bevor die Datengrundlage näher betrachtet, im Folgenden ein kurzer Einblick in das deutsche Abrechnungssystem im Krankenhaus gegeben werden, um diese Abkürzungen zu erklären. \\

Seit 2003 wird in Deutschland die Vergütung im Kranhausbereich über ein Fallpauschalensystem realisiert. Dieses basiert auf den sogenannten Diagnosis Related Groups (DRG) oder auf deutsch diagnosebezogene Fallgruppen. Behandlungsfälle, die medizinisch und hinsichtlich des Ressourcenverbrauchs ähnlich sind, sind dort zu Fallgruppen zusammengefasst. Die Zuordnung erfolgt auf Basis der Patienten- und Falldaten die während eines Krankenhausaufenthaltes gesammelt werden. Dazu gehören neben dem Alter und Geschlecht des Patienten auch die gestellten Diagnosen und die vorgenommen Prozeduren. Komplikationen oder erschwerende Begleiterkrankungen (Komorbiditäten) werden über verschiedene Schweregrade berücksichtigt. Für jede DRG gibt es eine Fallpauschale. Abhängig von der Verweildauer können zu dieser Pauschale noch Zu- bzw. Abschläge hinzukommen. Der endgültige Betrag ergibt dann die Kosten für einen Behandlungsfall. Das System wird vom "`Institut für das Entgeltsystem im Krankenhaus"'\footnote{\url{www.g-drg.de}} (kurz InEK) gepflegt und weiterentwickelt. \\

Die während eines Krankenhausaufenthalts gestellten Diagnosen und die durchgeführten Prozeduren werden nach den medizinischen Klassifikationen ICD-10-GM und OPS kodiert. Das ICD-10-GM ist eine für Deutschland angepasste Version der "`internationalen statistischen Klassifikation der Krankheiten und verwandter Gesundheitsprobleme"'(kurz ICD\footnote{Aufgrund des englischen Namens: "`International Statistical Classification of Diseases and Related Health Problems"'}). Der zugehörige Katalog wird vom "`deutschen Institut für Medizinische Dokumentation und Information"'\footnote{\url{www.dimdi.de}},kurz DIMDI, jährlich aktualisiert und angepasst. Er ist hierarchisch strukturiert und enthält 22 Krankheitskapitel, die sich in Gruppen, Kategorien und Subkategorien aufsplitten. Das DIMDI schätzt die Anzahl der Schlüsselnummern auf ca. 13.400.  Die jährlichen Anpassungen stellen auch eine besondere Herausforderung bei der Arbeit mit ICD-Schlüsseln dar. Es kann vorkommen, dass in zwei unterschiedlichen Jahren einem ICD-Schlüssel unterschiedliche Diagnosen zugeordnet werden. Der Operationen- und Prozedurenschlüssel (OPS) wird ebenfalls vom DIMDI gepflegt und ist die amtliche Klassifikation zum Verschlüsseln von Operationen, Prozeduren und allgemein medizinischen Maßnahmen im stationären Bereich und beim ambulanten Operieren. \\

Sowohl die DRG- als auch ICD-Informationen sind, in den Grunddaten, für jeden einzelnen Krankenhausfall aufgeschlüsselt. Es ist zu beachten, dass alle während eines Kranhausfalles gestellten Diagnosen erfasst werden. Das heißt es können auch Diagnosen vorkommen, die mit der DRG nicht in Zusammenhang stehen\footnote{z.B. ein Herzinfarkt während einer Operation}. Die Datenstruktur der aufbereiteten Daten wird in folgendem Diagramm veranschaulicht:

\begin{figure}[htb]                     
\centering 
\includegraphics[width=0.8\textwidth]{./bilder/ER-Diagramm}
\caption{ER-Diagramm Datengrundlage} 
\label{fig:Datengrundlage} 
\end{figure}

\begin{enumerate}[label=(\roman{*})]
	\item \textbf{Versicherter:} In der ersten Tabelle sind Information zu den Versicherten hinterlegt. Neben Geschlecht und Geburtsdatum, gibt es auch Information über den Wohnort(Postleitzahl) und den Zeitraum in dem er versichert war. Letzteres ist wichtig, da nur während dieses Zeitraums Leistungsdaten über den entsprechenden Versicherten vorliegen. Als Primärschlüssel wird in dieser Tabelle die Personen\_ID verwendet, wodurch dann auch eine Zuordnung zu den Krankenhaus Falldaten möglich ist. Leider besitzt jeder Versicherte mehrere Einträge in dieser Tabelle, da für jede Änderungsmeldung eine neue Zeile angelegt wurde.\\

	\item \textbf{Krankenhaus\_Fall:} Ein Krankenhausfall umfasst alle Maßnahmen, die von der Einweisung bis zu Entlassung eines Versicherten fällig werden. In dieser Tabelle kommt ein zusammengesetzter Primärschlüssel aus Fall\_ID und Institutionskennzeichen des Krankenhauses (IK) zum Einsatz \footnote{Das ist notwendig da jedes Krankenhaus die Fall\_ID selbst vergibt und es so vorkommt das zwei Krankenhäuser die selbe ID vergeben.}. Für jeden Behandlungsfall gibt es Daten zum Zeitpunkt und Grund der Aufnahme und Analog für die Entlassung. Außerdem wird die abgerechnete DRG und die damit verbundenen Kosten angegeben. 

	\item \textbf{Fall\_Diagnose:} Zu jedem Fall sind außerdem die dazugehörigen Diagnosen hinterlegt. Diese können wieder über die Kombination aus Institutionskennzeichen und Fall\_ID zugeordnet werden. Die Diagnosen werden nach dem oben beschrieben ICD-Katalog codiert und in Haupt- und Nebendiagnosen unterteilt, durch das Feld Diagnoseart. Jeder Datensatz enthält eine Primäre ICD zu der falls notwendig auch die Lokalisation angegeben wird. Das ist z.B. notwendig um zu spezifizieren, ob der linke oder der rechte Arm gebrochen ist. In einigen wenigen Fällen gibt es auch noch eine Sekundäre ICD.

\end{enumerate}

\subsection{Identifizierung von Unfällen}

Eine Herausforderung dieser Arbeit war es, aus den sehr umfangreichen Abrechnungsdaten, die Fälle zu identifizieren, die als Unfälle im Sinne des Kohorten-Modells interpretiert werden können. In diesem Zusammenhang sollte nochmal erwähnt werden, dass alle Fälle die nicht über die in diesem Abschnitt beschrieben Methodik erfasst werden können, trotzdem bilanziell im Kohorten Modell erfasst sind. Diese werden dann der Phase regen Lebens zugeordnet und somit gehen keine Kosten verloren. \\

Das wichtigste Erkennungsmerkmal der Unfälle ist, dass sie sich nicht ankündigen. Deshalb ist der Aufnahmegrund im Krankenhaus ein guter Indikator dafür, ob der Patient mit Überweisung oder Termin aufgenommen wurde oder nicht. In den Daten ist der Aufnahmegrund entsprechend den gesetzlichen Vorgaben codiert\footnote{siehe Anhang \ref{sec:301}}. Die für uns relevanten Information sind in der 3. und 4. Stelle codiert. Die folgenden Tabelle liefert eine Übersicht der möglichen Ausprägungen und der relativen Häufigkeiten in den Daten: \\

\begin{table}[H]
	\centering
	\begin{tabular}{|l|l|r|}
		\hline
		Code & Aufnahmegrund &	Anteil \\
		\hline
		01 & Normalfall & 56,704\% \\
		\hline
		07 & Notfall & 38,566\% \\
		\hline
		03 & Verkehrsunfall / Sportunfall / Sonstiger Unfall	& 0,105\% \\
		\hline
		02 & Arbeitsunfall / Wegeunfall / Berufskrankheit & 0,021\% \\
		\hline
		06 & Kriegsbeschädigten-Leiden / BVG-Leiden & 0,003\% \\
		\hline
		04 & Hinweis auf Einwirkung von äußerer Gewalt	& 0,002\% \\
		\hline
		05 & frei (früher Hinweis auf Selbstmord / Selbstbeschädigung\footnote{Wird wegen Datenschutz nicht mehr codiert und ist für uns nicht relevant.})	& 0,001\% \\
		\hline
		\hline
			 &\textit{Keine Angabe (Feld nicht gefüllt)}	& 4,598\% \\
		\hline
	\end{tabular}
	\caption{Aufnahmegrund und relative Häufigkeiten}
	\label{tbl:Aufnahme}
\end{table}

Mehr als die Hälfte der Krankenhausfälle werden als Normalfall klassifiziert und kommen somit über eine Überweisung oder mit Termin ins Krankenhaus. Ein sehr kleiner Teil wird aufgrund einer Kriegsbeschädigung(06) behandelt oder aufgrund eines Gewaltverbrechens(04).  Für uns interessant sind also die Notfälle und die Fälle die tatsächlich als Unfall aufgenommen werden (02 und 03). Letztere machen leider nur einen sehr kleinen Teil aus, was auf die Natur der Daten zurückzuführen ist. Diese Schlüssel werden nur vergeben, wenn es versicherungsrelevant ist. Damit konnten wir den Anteil der möglich Unfälle bereits auf ca. 40\% der Krankenhausfälle einschränken. \\

Den nächsten Anhaltspunkt liefert der Entlassungs- bzw. Verlegungsgrund. Allerdings gibt es 25 verschiedene Ausprägungen und zusätzlich die Information, ob der Versicherte arbeitsfähig entlassen wurde\footnote{siehe Anhang \ref{sec:301}}. Deshalb erläutern wir lediglich die interessanten Fälle, welche in der nachfolgenden Tabelle zusammengefasst sind. Die Anteile beziehen sich dabei bereits nur auf Notfälle und Unfälle:  \\

\begin{table}[H]
	\centering
	\begin{tabular}{|l|r|}
		\hline
		Entlassungsgrund &	Anteil \\
		\hline
		Behandlung beendet & 83,210\% \\
		\hline
		Tod oder Entlassung in ein Hospiz & 5,796\% \\
		\hline
		Entlassung in eine Pflegeeinrichtung	& 3,199\% \\
		\hline
		Entlassung in eine REHA-Einrichtung & 2,219\% \\
		\hline
		Sonstige & 5,575\% \\
		\hline
	\end{tabular}
	\caption{Entlassungsgrund und relative Häufigkeiten für Not- und Unfälle}
	\label{tbl:Entlassung}
\end{table} 

Für den Großteil der Not- und Unfälle, endet mit dem Krankenhausaufenthalt auch die Behandlung. Ein Teil der Patient stirbt oder muss in ein Hospiz verlegt werden. Diese Fälle werden in der Prämortalitätsphase des Kohorten-Modells erfasst und sind somit für die Singulären Ereignisse, zumindest kostentechnisch, nicht relevant. Allerdings kann die Tatsache, dass ein entsprechender Unfall passiert ist, bei der Modellierung der alters und geschlechtsabhängigen Unfallwahrscheinlichkeiten verwendet werden. Fälle mit anschließender Pflege sind für die Singulären Ereignisketten von Relevanz. Diese werden im nächsten Kapitel behandelt. Unter Sonstige sind insbesondere die nicht trivialen Fälle zusammengefasst. Das bedeutet in erster Linie eine Verlegung oder eine Entlassungen aus abrechnungstechnischen Gründen. In diesen Fällen muss der weitere Verlauf aufwändig rekonstruiert werden, was nicht immer gelingt. Insbesondere bei einen Kassenwechsel des Patient stehen die Information i.d.R. nicht zur Verfügung. Hier muss dann abhängig vom jeweiligen Unfalltyp entschieden werden, ob sich der Aufwand lohnt. Gelingt die Rekonstruktion der Behandlungspfade, müssten die Kosten aller relevanten Anschlussbehandlung zu den Unfallkosten hinzugezählt werden. \\

Nachdem die möglichen Unfälle aufgrund des Aufnahme und Entlassungsgrundes eingegrenzt wurden, sind in den Daten nur noch die DRG und ICD Informationen vorhanden. Zu jedem Fall gibt es eine DRG und mehrere Diagnosen, wobei eine davon als Hauptdiagnose ausgezeichnet wird. Die Hauptdiagnose ist in der Regel der Grund für die Hospitalisierung. Es kommt vor, dass während der Behandlung andere Erkrankung entdeckt werden und dadurch die Hauptdiagnose am Ende für die DRG und damit für die Kosten, kaum eine Rolle spielt\footnote{Z.B. wenn ein Patient wegen einer Ohnmacht eingeliefert wird, kommt es vor, dass am Ende das einsetzen eines Herzschrittmachers abgerechnet wird.}. \\

Aufgrund der Komplexität der mögliche Krankenhausfälle ist es schwierig eine allgemeine Vorgehensweise zu beschreiben um weiter Unfälle einzugrenzen. Um geeignete Kandidaten für ein Unfallmodell zu finden, kann man allerdings die häufigsten oder teuersten Fälle betrachten, die nach den Filter des Aufnahme- und Entlassungsgrundes übrig bleiben. Der Vorteil des Kohorten-Modells ist es, dass unabhängig davon wie vollständig man die Unfalltypen modelliert keine Kosten verloren gehen. Außerdem lässt sich das Phänomen der isolierten Ereignisse jederzeit durch weitere Modelle genauer zu beschreiben, falls die erforderlich ist. Die restlichen Kosten werden alle in der Phase regen Lebens erfasst. \\

In den verwendeten Daten waren die häufigsten Unfälle Hypertonie, Herzinsuffizienz, Ohnmacht oder eine Gehirnerschütterung. Die konkreten DRGs und ICDs, die man einem Unfalltyp zuordnen möchte, lassen sich teilweise nur mit medizinischen Hintergrundwissen identifizieren. Aus diesem Grund wurde für die Erstellung der Modelle ein einfacher Fall ausgewählt: die Gehirnerschütterung.

\subsection{Anwendung und Test der Modelle}

In diesem Abschnitt werden wir, am Beispiel vom Unfall Gehirnerschütterung, den vorgestellten Poisson-Ansatz implementieren und bewerten. Dazu ist es notwendig eine saubere Datenbasis auszuwählen, auf der die notwendigen Parameter geschätzt werden können. Außerdem werden wir eine Testmenge definieren, die später zur Bewertung des fertigen Modells verwendet wird.\\

Im vorangegangenen Abschnitt haben wir bereits erläutert, wie die Abrechnungsdaten nach Aufnahme und Entlassungsgrund gefiltert werden können, um die relevanten Fälle zu identifizieren. Die selben Filter wurden auch verwendet, um die Grundtabelle mit allen potentiellen Unfällen zu erstellen\footnote{siehe Anhang \ref{sec:scripts}}. Dazu wurde MS SQL Server als Datenbank verwendet und die benötigten Abfragen per SQL formuliert. 


Datenselktion

	SQL: Eingrenzung der Fälle Jahre
	- bevor parameter geschätzt werden können müssen unfalldaten eingegrenzt und aufbereitet werden.
	Für die Modellierung werden dabei nur Versicherte betrachtet, die über den gesamten Zeitraum bei der Kasse versichert waren und somit vollständige Datensätze besitzen
	Probleme bei der Eingrenzung

Datenzusammenfürung und aggregation

Problem mit personenDaten, Java Lösung => Fertige Datenbasis


Schätzen der Modellparameter
	schätzen der parameter über exel
	allgemeine Unfallwahrscheinlicket
	Geschlechts-/Altersabhängigkeit testen und Parameter schätzen
	=> Verteilung
	
Schätzden der Kostenverteilung
	evtl mit anpassungstest

Prognose auf Basis der Schätzwerte auf Basis der Sterbewahrscheinlichkeit



- anschließend müssen die für das Modell benötigten personendaten den unfällen zugewiesen werden
- 

- Selection der Daten....
	- auswahl per sql
	- aufbereitung der personendaten per java
	- 
\begin{itemize}
	\item Hochkostenfälle ?
	\item Fälle von Versicherten die nicht die ganze Zeit da sind gehören zwar zum Phänomen Unfall aber die Kosten können nicht berücksichtigt werden
\end{itemize}

                 
\begin{itemize}

	\item Modell ableiten am Beispiel von gehirnerschüterrung
	\item Saissonalität und Geschlechts-/Altersabhängigkeit testen und Parameter schätzen
	\item Ergodizität voraussetzen
	\item Eingrenzung der Fälle
	\item Analyse der Daten
	\item Häufigkeitsverteilung
	\item Kostenverteilung
	\item Zeitpunktverteilung
	\item Altersverteilung
	\item Hochkostenfälle
	\item Anpassungstest an Poissonverteilung
	\item Verknüpfung mit Kosten
	\item Test des Modells
\end{itemize}